# [Diamond V] 트리 위의 폴 가이즈 - 20368 

[문제 링크](https://www.acmicpc.net/problem/20368) 

### 성능 요약

메모리: 63764 KB, 시간: 160 ms

### 분류

자료 구조, 깊이 우선 탐색, 게임 이론, 그래프 이론, 그래프 탐색, 세그먼트 트리, 트리

### 제출 일자

2025년 6월 6일 01:28:12

### 문제 설명

<p><em>N</em>개의 정점과 <em>N</em>-1개의 간선으로 구성되어 있으며, 어떤 두 정점을 고르더라도 두 정점을 잇는 유일한 하나의 경로가 존재하는 그래프를 트리라고 한다.</p>

<p>준영이와 성민이는 게임 <code>폴 가이즈(Fall Guys)</code>의 우승을 남겨두고 일대일 대결을 펼치게 되었다. 이 게임은 트리 형태의 게임판에서 진행되며, 준영이와 성민이가 각자 배정된 서로 다른 두 정점에 위치한 채로 시작된다. 게임은 서로 턴을 번갈아가며 진행된다. 자신의 턴이 오면, 자신이 위치한 정점과 인접한 정점으로 한 칸 이동해야 한다. 자신 혹은 상대방이 현재 위치하거나, 과거에 위치한 적이 있던 정점은 곧 게임 시스템에 의해 게임판의 바닥으로 떨어져 사라지기 때문에, 해당 정점으로는 이동할 수 없다. 만약, 이동할 수 없는 플레이어가 존재하면 그 플레이어의 턴은 무시하고 건너뛴다. 두 플레이어가 모두 이동할 수 없는 경우에는 게임이 종료된다. 각 플레이어는 한 칸 이동할 때마다 1점을 획득한다.</p>

<p>준영이와 성민이는 (자신의 점수 - 상대방의 점수)를 최대화하는 것이 목표이다. 준영이가 먼저 턴을 시작하고, 두 명 모두 항상 최선의 전략으로 게임을 플레이한다고 할 때, 게임이 끝난 뒤 (준영이의 점수 - 성민이의 점수)를 구하는 프로그램을 작성하시오.</p>

<p style="text-align: center;"><img alt="" src="https://upload.acmicpc.net/ab72c015-0f62-4cdd-aefb-23aaff61146b/-/preview/" style="height: 300px; width: 500px;"></p>

<p>위 그림은 예제 5를 표현한 것이다. 준영이는 노란색 정점들을, 성민이는 보라색 정점들을 밟는 것이 최선이다.</p>

### 입력 

 <p>첫째 줄에 게임판의 정점의 개수 <em>N</em> (2 ≤ <em>N</em> ≤ 200,000), 준영이가 배정된 정점 <em>P</em>, 성민이가 배정된 정점 <em>Q</em> (1 ≤ <em>P</em>, <em>Q</em> ≤ <em>N</em>, <em>P</em> ≠ <em>Q</em>)가 주어진다.</p>

<p>둘째 줄부터 <em>N</em>-1개의 줄에는 두 정수 <em>A<sub>i</sub></em>, <em>B<sub>i</sub></em> (1 ≤ <em>A<sub>i</sub></em>, <em>B<sub>i</sub></em> ≤ <em>N</em>)가 주어진다. 이는 정점 <em>A<sub>i</sub></em>와 <em>B<sub>i</sub></em>를 잇는 간선이 존재함을 의미한다.</p>

<p>주어지는 입력은 트리 형태이다.</p>

### 출력 

 <p>준영이와 성민이가 (자신의 점수 - 상대방의 점수)를 최대화하는 방법으로 게임을 진행할 때, (준영이의 점수 - 성민이의 점수)를 출력하라.</p>

